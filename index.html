<!DOCTYPE html>
<html lang="en">

<head>
    <title>Days Until Vacay</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="manifest" href="manifest.json"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat"> -->
    <!-- <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script> -->
    <!-- <script src="https://cdn.tailwindcss.com/"></script> -->
    <!-- <style>
        body {
            font-family: 'Montserrat', sans-serif;
        }

        table {
            border-collapse: collapse;
            border: 2px solid rgb(200, 200, 200);
            letter-spacing: 1px;
            font-size: 0.8rem;
        }

        td,
        th {
            border: 1px solid rgb(190, 190, 190);
            padding: 10px 20px;
        }

        th {
            background-color: rgb(235, 235, 235);
        }

        td {
            text-align: center;
        }

        tr:nth-child(even) td {
            background-color: rgb(250, 250, 250);
        }

        tr:nth-child(odd) td {
            background-color: rgb(245, 245, 245);
        }
    </style> -->
</head>

<body class="container-fluid">
    <h1 class="h1">Mt. Kilimanjaro Trip</h1>
    <h2>Dates</h2>
    <table class="table">
        <tr>
            <th>Event</th>
            <th>Date</th>
            <th>Days Until</th>
        </tr>
        <tr>
            <td>Departure</td>
            <td></td>
            <td data-month="7" data-day="22">...calculating...</td>
        </tr>
        <tr>
            <td>Start climb</td>
            <td>Tue, Aug 22</td>
            <td data-month="7" data-day="25">...calculating...</td>
        </tr>
        <tr>
            <td>Summit</td>
            <td>Tue, Aug 22</td>
            <td data-month="7" data-day="31">...calculating...</td>
        </tr>
        <tr>
            <td>Start safari</td>
            <td>Tue, Sep 2</td>
            <td data-month="8" data-day="2">...calculating...</td>
        </tr>
        <tr>
            <td>Fly home</td>
            <td>Tue, Aug 22</td>
            <td data-month="8" data-day="6">...calculating...</td>
        </tr>
        <tr>
            <td>Arrive home</td>
            <td>Tue, Aug 22</td>
            <td data-month="8" data-day="7">...calculating...</td>
        </tr>
    </table>
    <h2>Info</h2>
    <p><a href="https://www.ultimatekilimanjaro.com/lemosho-route/">Lemosho Route Description</a></p>
    <p>
        <img class="w-100 h-auto" src="kilimanjaro_lemosho.png"
            alt="profile of Lemosho route up Mt Kilimanjaro" width="2560" height="893">
    </p>
    <table class="table">
        <tr>
            <!-- <th>Day</th> -->
            <th>Start</th>
            <th>Altitude</th>
            <th>Stop</th>
            <th>Altitude</th>
            <th>Hours</th>
            <th>Miles</th>
        </tr>
        <tr>
            <!-- <td>1</td> -->
            <td>Gate</td>
            <td>7742</td>
            <td>Mkubwa</td>
            <td>9498</td>
            <td>3-4</td>
            <td>4</td>
        </tr>
        <tr>
            <!-- <td>2</td> -->
            <td>Mkubwa</td>
            <td>9498</td>
            <td>Shira</td>
            <td>11500</td>
            <td>5-6</td>
            <td>5</td>
        </tr>
        <tr>
            <!-- <td>3</td> -->
            <td>Shira</td>
            <td>11500</td>
            <td>Moir</td>
            <td>13800</td>
            <td>5-7</td>
            <td>7</td>
        </tr>
        <tr>
            <!-- <td>4</td> -->
            <td>Moir<br>Tower</td>
            <td>13800<br>15190</td>
            <td>Tower<br>Barranco</td>
            <td>15190<br>13044</td>
            <td>4-5<br>2-3</td>
            <td>4<br>2</td>
        </tr>
        <tr>
            <!-- <td>5</td> -->
            <td>Barranco</td>
            <td>13044</td>
            <td>Karanga</td>
            <td>13106</td>
            <td>4-5</td>
            <td>3</td>
        </tr>
        <tr>
            <!-- <td>6</td> -->
            <td>Karanga</td>
            <td>13106</td>
            <td>Barafu</td>
            <td>15331</td>
            <td>4-5</td>
            <td>2</td>
        </tr>
        <tr>
            <!-- <td>7</td> -->
            <td>Barafu<br>Uhuru</td>
            <td>15331<br>19341</td>
            <td>Uhuru<br>Mweka</td>
            <td>19341<br>10065</td>
            <td>7-8<br>4-6</td>
            <td>3<br>7</td>
        </tr>
        <tr>
            <!-- <td>8</td> -->
            <td>Mweka</td>
            <td>10065</td>
            <td>Gate</td>
            <td>5380</td>
            <td>3-4</td>
            <td>6</td>
        </tr>
        <tr>
            <!-- <td></td> -->
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>43</td>
        </tr>
    </table>

    <script>
        const now = new Date();
        function getDaysUntil(month, day) {
            const m0 = Number(month);
            const d0 = Number(day);
            let result;

            if (now.getFullYear() !== 2023) {
                result = 'Wrong year! (This only works in 2023.)'
            } else if (now.getMonth() > 8) {
                result = ''
            } else {
                const nowMonth = now.getMonth();
                const nowDay = now.getDate(); // getDay means day of week; here we use getDate for day of month
                result = 0;
                if (nowMonth === 6) {
                    // if it's currently July
                    result += 31 - nowDay;
                    // if target date is in Sep
                    if (m0 === 8) {
                        result += 31;
                    }
                    result += d0;
                } else if (nowMonth === 7) {
                    // if it's currently August
                    if (m0 === 8) {
                        result += 31 - nowDay;
                        result += d0;
                    } else if (m0 === 7) {
                        result += d0 - nowDay;
                    }
                } else if (nowMonth === 8) {
                    // if it's currently September
                    if (m0 < 8) {
                        result = ''
                    } else if (m0 === 8) {
                        result = d0 - nowDay;
                    }
                };
            };
            return result;
        }
        document.querySelectorAll('td[data-month]').forEach(el => {
            el.textContent = getDaysUntil(el.dataset.month, el.dataset.day);
            const d = new Date(2023, el.dataset.month, el.dataset.day)
            el.previousElementSibling.textContent = d.toLocaleDateString(
                undefined,
                { weekday: 'short', month: 'short', day: 'numeric' },
            )
        });

        const registerServiceWorker = async () => {
            if ("serviceWorker" in navigator) {
                try {
                    const registration = await navigator.serviceWorker.register("/serviceworker.js");
                    if (registration.installing) {
                        console.log("Service worker installing");
                    } else if (registration.waiting) {
                        console.log("Service worker installed");
                    } else if (registration.active) {
                        console.log("Service worker active");
                    }
                } catch (error) {
                    console.error(`Registration failed with ${error}`);
                }
            }
        };

        // registerServiceWorker();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>

</html>